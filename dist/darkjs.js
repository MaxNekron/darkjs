(()=>{"use strict";const t={attributes:!0,childList:!0,subtree:!0},e={load:function(t){"img"!=this.getTag()&&window.addEventListener("load",t.bind(this),!1)},modified:function(e){let s,o=function(){s||(setTimeout(e.bind(this),1),s=setTimeout((()=>{s=null}),1))}.bind(this);"undefined"!=typeof MutationObserver?new MutationObserver(o).observe(this,t):this.addEventListener("DOMSubtreeModified",o,!1)}};Element.prototype.setClass=function(t){return this.setAttribute("class",t||""),this},Element.prototype.getClass=function(){return this.getAttribute("class")||""},Element.prototype.hasClass=function(t){return!!this.getClass().match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},Element.prototype.addClass=function(t){return this.hasClass(t)||this.setClass((this.getClass()+" "+t).trim()),this},Element.prototype.removeClass=function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");return this.setClass(this.getClass().replace(e," ").trim()),this},Element.prototype.removeClassMatching=function(t){const e=this.getClass().match(new RegExp(t,"g"))||[];for(var s=0;s<e.length;s++)this.removeClass(e[s]);return this},Element.prototype.toHtml=function(){var t=document.createElement("div");return t.appendChild(this),t.innerHTML},Element.prototype.insert=function(t,e){return this.childNodes.length>0&&e<this.childNodes.length&&"bottom"!==e?("top"===e&&(e=0),this.insertBefore(t,this.childNodes[e])):this.appendChild(t),this},Element.prototype.before=function(t,e){var s=this.parentNode,o=Array.prototype.indexOf.call(s.childNodes,this)-1;return s.insert(t,o),this},Element.prototype.after=function(t,e){var s=this.parentNode,o=Array.prototype.indexOf.call(s.childNodes,this)+1;return s.insert(t,o)},Element.prototype.remove=function(){var t=this.parentNode;t&&t.removeChild(this)},Element.prototype.contains=function(t){return this==t||!!t&&this.contains(t.parentNode)},Element.prototype.setText=function(t){return this.innerText=t,this},Element.prototype.addText=function(t){return this.innerText=this.innerText+t,this},Element.prototype.setHtml=function(t){return this.innerHTML=t,this},Element.prototype.addText=function(t){return this.innerHTML=this.innerHTML+t,this},Element.prototype.getTag=function(){return this.tagName.toLowerCase()},Element.prototype.on=function(t,s,o){const r=e[t];return r&&r.bind(this)(s.bind(this)),this.addEventListener(t,s.bind(this),o),this},Window.prototype.on=Element.prototype.on,Element.prototype.styles=null,Element.prototype.addStyle=function(t,e){return this.style[t]=e,this},Element.prototype.setStyle=function(t){return this.setAttribute("style",t),this},Element.prototype.getStyle=function(t){return this.styles||(this.styles=window.getComputedStyle(this,null)),this.styles.getPropertyValue(t)},Element.prototype.getPath=function(){if(""!==this.id)return"#"+this.id;if(this===document.body)return this.getTag();for(var t=1,e=this.parentNode.childNodes,s=0;s<e.length;s++){var o=e[s];if(o===this)return this.parentNode.getPath()+" > "+this.getTag()+":nth-of-type("+t+")";1===o.nodeType&&o.getTag()===this.getTag()&&(t+=1)}};String.prototype.url_encode=function(){return encodeURIComponent(this)},String.prototype.url_decode=function(){return decodeURIComponent(this)},Object.prototype.toQueryString=function(){let t=[];return Object.keys(this).forEach((e=>{t.push([(e+"").url_encode(),(this[e]+"").url_encode()].join("="))})),t.join("&")},Object.prototype.fromQueryString=function(t){let e={};return t?(t.split("&").forEach((t=>{const s=t.split("=");e[s[0].url_decode()]=s[1].url_decode()})),e):e};const s=function(t,e){const s=Object.keys(e);for(let o=0;o<s.length;o++){const r=s[o];t=t.replace(new RegExp("{"+r+"}","g"),e[r])}return t.replace(new RegExp("{\\w+}","g"),"")};class o{constructor(t){const e=this.hsla(t);this.hue=e.hue,this.saturation=e.saturation,this.lightness=e.lightness,this.alpha=e.alpha}}function r(t){return new o(t)}function n(t){let e={};f.getStylesFromElement(t).forEach((function(t){/rgb/.test(t)&&!e[t]&&(e[t]=r(t))}));const s=t.children;for(var o=0;o<s.length;o++)e={...e,...n(s[o])};return e}function i(t){return t.alpha>0}function l(t,e){return i(t)&&t.lightness<e}function a(t,e){return i(t)&&t.lightness>e}o.prototype.toString=function(){return this.toRgba()},o.prototype.toHexa=function(){this.hslToRgb(this.hue%360,this.saturation,this.lightness);var t=this.valToHex(255*this.alpha);return this.toHex()+t},o.prototype.toHex=function(){const t=this.hslToRgb(this.hue%360,this.saturation,this.lightness);return"#"+this.valToHex(t.red)+this.valToHex(t.green)+this.valToHex(t.blue)},o.prototype.toRgba=function(){const t=this.hslToRgb(this.hue%360,this.saturation,this.lightness);return"rgba("+Math.round(t.red)+", "+Math.round(t.green)+", "+Math.round(t.blue)+", "+this.alpha+")"},o.prototype.toHsl=function(){return"hsl("+(this.hue%360||0)+", "+Math.round(100*this.sat)+"%, "+Math.round(100*this.lightness)+"%)"},o.prototype.valToHex=function(t){for(var e=parseInt(t).toString(16);e.length<2;)e="0"+e;return e},o.prototype.hslToRgb=function(t,e,s){var o,r;return t/=60,o=2*s-(r=s<=.5?s*(e+1):s+e-s*e),{red:255*this.hueToRgb(o,r,t+2),green:255*this.hueToRgb(o,r,t),blue:255*this.hueToRgb(o,r,t-2)}},o.prototype.hueToRgb=function(t,e,s){return s<0&&(s+=6),s>=6&&(s-=6),s<1?(e-t)*s+t:s<3?e:s<4?(e-t)*(4-s)+t:t},o.prototype.rgba=function(t){var e=1,s=t.replace(/[^\d\,\.]/g,"").split(",");return s[0]=(parseInt(s[0])||0)/255,s[1]=(parseInt(s[1])||0)/255,s[2]=(parseInt(s[2])||0)/255,void 0!==s[3]&&(e=parseFloat(s[3])),{red:s[0],green:s[1],blue:s[2],alpha:e}},o.prototype.hsla=function(t){const e=this.rgba(t);var s,o,r,n,i,l,a=[];for(a[0]=e.red,a[1]=e.green,a[2]=e.blue,s=a[0],o=a[0],i=0,r=0;r<a.length-1;r++)a[r+1]<=s&&(s=a[r+1]),a[r+1]>=o&&(o=a[r+1],i=r+1);return 0==i&&(l=(a[1]-a[2])/(o-s)),1==i&&(l=2+(a[2]-a[0])/(o-s)),2==i&&(l=4+(a[0]-a[1])/(o-s)),isNaN(l)&&(l=0),(l*=60)<0&&(l+=360),n=(s+o)/2,{hue:l,saturation:s==o?0:n<.5?(o-s)/(o+s):(o-s)/(2-o-s),lightness:n,alpha:e.alpha}};const h={colorsInElement:function(t,e,s){return function(t,e,s){let o={};return Object.keys(t).forEach((r=>{const n=t[r];(a(n,s)||l(n,e))&&(o[r]=n)})),o}(n(t),e,s)},invertBrightness:function(t,e=0){return t.lightness=1+e/100-t.lightness,t.lightness>1&&(t.lightness=1),t},isDark:l,isBright:a},c={"background-color":"bg",fill:"fl",stroke:"st",color:"cl","border-top-color":"bt","border-right-color":"br","border-bottom-color":"bb","border-left-color":"bl"},u={fill:["svg","path","rect","clippath","circle","elipse","line","polygon"],stroke:["svg"]},d={border:{test:"^0D+|none",props:["border-top-color","border-right-color","border-bottom-color","border-left-color"]}};function p(t){let e=Object.keys(c);const s=t.getTag();return Object.keys(d).forEach((s=>{const o=d[s],r=t.getStyle(s);new RegExp(o.test).test(r)&&(e=e.filter((t=>o.props.indexOf(t)<0)))})),Object.keys(u).forEach((t=>{u[t].indexOf(s)<0&&(e=e.filter((e=>e!=t)))})),e}function g(t,e,o){return s("{className}-{prop}-{level}",{className:o,level:e,prop:c[t]})}const f={props:c,getStylesFromElement:function(t){let e=[];return p(t).forEach((s=>{e.push(t.getStyle(s))})),e},addStylesToElementForColors:function(t,e,o,n,i=0,l=!0){!function(t,e){const s=t.children;for(var o=0;o<s.length;o++){const t=s[o];"style"==t.getTag()&&t.className.match(e)&&t.remove()}}(t,n);const a=function(t,e,o,n,i){const l=function(t){const e=t.replace(/^(\w+).*/i,"$1"),s=document.createElement(e);var o=t.replace(/\[[^\[\]]+\]/g,"").match(/#[\w-]+/),r=t.replace(/\[[^\[\]]+\]/g,"").match(/\.([\w\-]+)/g),n=t.match(/\[[^\[\]]+\]/g);return o&&(s.id=o.join("").replace("#","")),r&&s.setClass(r.join("").replace(/\./g," ").trim()),n&&n.forEach((t=>{var e=t.replace(/\[|\]/g,"").split("=");s.setAttribute(e[0],e.splice(1).join("="))})),s}("style[class="+o+"]");return i&&l.addText(s(".{className} { transition: all .2s ease !important; } \n",{className:o})),t.forEach(((t,i)=>{const a=h.invertBrightness(r(t),n);l.addText(function(t,e,o,r){let n="";return Object.keys(c).forEach((i=>{n+=function(t,e,o,r,n){return s("{path}.{className}.{styleClass}, {path}.{className} .{styleClass} { {prop}: {color} !important; } \n",{path:r,className:n,prop:t,color:e,styleClass:g(t,o,n)})}(i,t,e,o,r)})),n}(a,i+1,e,o))})),l}(e,o,n,i,l);t.insert(a,0)},addClassesToElement:function t(e,s,o,r,n,i,l){const a=Object.values(o);e.getTag(),p(e).forEach((t=>{const n=e.getStyle(t),c=o[n];if(c&&(r.indexOf(t)<0?h.isDark(c,i):h.isBright(c,l))){const o=a.indexOf(c);e.addClass(s).addClass(g(t,o+1,s))}}));const c=e.children;for(var u=0;u<c.length;u++){const e=c[u];n.indexOf(e.getTag())<0&&t(e,s,o,r,n,i,l)}},removeStyleClassesInElement:function t(e,s){e.removeClassMatching(s+"-[\\w-]+");const o=e.querySelectorAll("."+s)||[];for(var r=0;r<o.length;r++)t(o[r],s)}},m=class{constructor(t,e={}){this.root=t,this.animate=e.animate??!0,this.offset=e.offset??10,this.className=e.className||"darkjs",this.darkThreshold=e.darkThreshold??.3,this.brightThreshold=e.brightThreshold??.7,this.background_props=e.backgroundProps??["fill","background-color"],this.exclude_elements=e.exclude_elements??["style","script","img","text","video","audio"],this.observer=new MutationObserver(this.onChange.bind(this)),this.isDark=!1,this.colors={}}darkem(){this.colors={...this.colors,...h.colorsInElement(this.root,this.brightThreshold,this.darkThreshold)},f.addStylesToElementForColors(this.root,Object.keys(this.colors),this.root.getPath(),this.className,this.offset,this.animate),f.addClassesToElement(this.root,this.className,this.colors,this.background_props,this.exclude_elements,this.darkThreshold,this.brightThreshold),this.isDark=!0,this.observer.observe(this.root,{attributes:!0,childList:!0,characterData:!1})}darkemnt(){f.removeStyleClassesInElement(this.root,this.className),this.colors={},this.isDark=!1}toggle(){this.isDark?this.darkemnt():this.darkem()}onChange(){this.isDark&&(this.darkem(),this.observer.disconnect())}};if(!window.Darkjs){window.Darkjs=m;let t={};document.querySelectorAll("script").forEach((e=>{/darkjs\.js\?/.test(e.src)&&(t={...t,...{}.fromQueryString(e.src.split("?").pop())})})),window.Darkjs.callback=window[t.callback],window.Darkjs.options=t,window.Darkjs.callback||(window.Darkjs.callback=function(){window.addEventListener("load",(function(){document.body.darkjs=new m(document.body,window.Darkjs.options),document.body.darkjs.darkem()}))}),window.Darkjs.callback()}})();