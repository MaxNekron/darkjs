(()=>{var t={52:()=>{String.prototype.url_encode=function(){return encodeURIComponent(this)},String.prototype.url_decode=function(){return decodeURIComponent(this)}}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,o),r.exports}(()=>{"use strict";o(52);const t=function(t){let e={};return t?(t.split("&").forEach((t=>{const o=t.split("=");o.length>1&&(e[o[0].url_decode()]=o[1].url_decode())})),e):e};function e(t){if(t)return document.readCookie(t)}function s(t,e){if(t)return document.writeCookie(t,e)}document.readCookie=function(t){const e=(" "+document.cookie).match(new RegExp(`\\s${t.url_encode()}=([^;]+)`));return e?e[1].url_decode():null},document.deleteCookie=function(t){return document.writeCookie(t,null,{duration:0})},document.writeCookie=function(t,e,o={}){e=""+e;const s=o.path||"/",n=o.samesite||"None",r=o.expires||function(t){let e=new Date;return e.setTime(e.getTime()+24*t*60*60*1e3),e}(o.duration??7);document.cookie=`${t.url_encode()}=${e.url_encode()}; expires=${r.toUTCString()}; path=${s}; SameSite=${n}`};const n=function(t,e){s(t,e?1:0),function(t,e){t&&("undefined"!=typeof Storage?window.localStorage.setItem(t,e):s(t,e))}(t,e)},r=function(t){return e(t)>0?function(t){if(t)return"undefined"!=typeof Storage?window.localStorage.getItem(t):e(t)}(t):null},i=function(){return window.matchMedia("(prefers-color-scheme: dark)").matches};class a{constructor(t){const e=this.hsla(t);this.hue=e.hue,this.saturation=e.saturation,this.lightness=e.lightness,this.alpha=e.alpha}}function h(t){return t.alpha>0}a.prototype.toString=function(){return this.toRgba()},a.prototype.toHexa=function(){this.hslToRgb(this.hue%360,this.saturation,this.lightness);var t=this.valToHex(255*this.alpha);return this.toHex()+t},a.prototype.toHex=function(){const t=this.hslToRgb(this.hue%360,this.saturation,this.lightness);return"#"+this.valToHex(t.red)+this.valToHex(t.green)+this.valToHex(t.blue)},a.prototype.toRgba=function(){const t=this.hslToRgb(this.hue%360,this.saturation,this.lightness);return"rgba("+Math.round(t.red)+", "+Math.round(t.green)+", "+Math.round(t.blue)+", "+this.alpha+")"},a.prototype.toHsl=function(){return"hsl("+(this.hue%360||0)+", "+Math.round(100*this.sat)+"%, "+Math.round(100*this.lightness)+"%)"},a.prototype.valToHex=function(t){for(var e=parseInt(t).toString(16);e.length<2;)e="0"+e;return e},a.prototype.hslToRgb=function(t,e,o){var s,n;return t/=60,s=2*o-(n=o<=.5?o*(e+1):o+e-o*e),{red:255*this.hueToRgb(s,n,t+2),green:255*this.hueToRgb(s,n,t),blue:255*this.hueToRgb(s,n,t-2)}},a.prototype.hueToRgb=function(t,e,o){return o<0&&(o+=6),o>=6&&(o-=6),o<1?(e-t)*o+t:o<3?e:o<4?(e-t)*(4-o)+t:t},a.prototype.rgba=function(t){var e=1,o=t.replace(/[^\d\,\.]/g,"").split(",");return o[0]=(parseInt(o[0])||0)/255,o[1]=(parseInt(o[1])||0)/255,o[2]=(parseInt(o[2])||0)/255,void 0!==o[3]&&(e=parseFloat(o[3])),{red:o[0],green:o[1],blue:o[2],alpha:e}},a.prototype.hsla=function(t){const e=this.rgba(t);var o,s,n,r,i,a,h=[];for(h[0]=e.red,h[1]=e.green,h[2]=e.blue,o=h[0],s=h[0],i=0,n=0;n<h.length-1;n++)h[n+1]<=o&&(o=h[n+1]),h[n+1]>=s&&(s=h[n+1],i=n+1);return 0==i&&(a=(h[1]-h[2])/(s-o)),1==i&&(a=2+(h[2]-h[0])/(s-o)),2==i&&(a=4+(h[0]-h[1])/(s-o)),isNaN(a)&&(a=0),(a*=60)<0&&(a+=360),r=(o+s)/2,{hue:a,saturation:o==s?0:r<.5?(s-o)/(s+o):(s-o)/(2-s-o),lightness:r,alpha:e.alpha}};const l=function(t){return new a(t)},c=function(t,e=0){return t.lightness=1+e/100-t.lightness,t.lightness>1&&(t.lightness=1),t},u=function(t,e){return h(t)&&t.lightness<e/100},d=function(t,e){return h(t)&&t.lightness>e/100},p={attributes:!0,childList:!0,subtree:!0},f={load:function(t){"img"!=this.getTag()&&window.addEventListener("load",t.bind(this),!1)},modified:function(t){let e,o=function(){e||(setTimeout(t.bind(this),1),e=setTimeout((()=>{e=null}),1))}.bind(this);"undefined"!=typeof MutationObserver?new MutationObserver(o).observe(this,p):this.addEventListener("DOMSubtreeModified",o,!1)}};Element.prototype.setClass=function(t){return this.setAttribute("class",t||""),this},Element.prototype.getClass=function(){return this.getAttribute("class")||""},Element.prototype.hasClass=function(t){return!!this.getClass().match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},Element.prototype.addClass=function(t){return this.hasClass(t)||this.setClass((this.getClass()+" "+t).trim()),this},Element.prototype.removeClass=function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");return this.setClass(this.getClass().replace(e," ").trim()),this},Element.prototype.removeClassMatching=function(t){const e=this.getClass().match(new RegExp(t,"g"))||[];for(var o=0;o<e.length;o++)this.removeClass(e[o]);return this},Element.prototype.toHtml=function(){var t=document.createElement("div");return t.appendChild(this),t.innerHTML},Element.prototype.insert=function(t,e){return this.childNodes.length>0&&e<this.childNodes.length&&"bottom"!==e?("top"===e&&(e=0),this.insertBefore(t,this.childNodes[e])):this.appendChild(t),this},Element.prototype.before=function(t,e){var o=this.parentNode,s=Array.prototype.indexOf.call(o.childNodes,this)-1;return o.insert(t,s),this},Element.prototype.after=function(t,e){var o=this.parentNode,s=Array.prototype.indexOf.call(o.childNodes,this)+1;return o.insert(t,s)},Element.prototype.remove=function(){var t=this.parentNode;t&&t.removeChild(this)},Element.prototype.contains=function(t){return this==t||!!t&&this.contains(t.parentNode)},Element.prototype.getText=function(){return this.innerText},Element.prototype.setText=function(t){return this.innerText=t,this},Element.prototype.addText=function(t){return this.innerText=this.innerText+t,this},Element.prototype.getHtml=function(){return this.innerHTML},Element.prototype.setHtml=function(t){return this.innerHTML=t,this},Element.prototype.addHtml=function(t){return this.innerHTML=this.innerHTML+t,this},Element.prototype.getTag=function(){return this.tagName.toLowerCase()},Element.prototype.on=function(t,e,o){const s=f[t];return s&&s.bind(this)(e.bind(this)),this.addEventListener(t,e.bind(this),o),this},Window.prototype.on=Element.prototype.on,Element.prototype.styles=null,Element.prototype.addStyle=function(t,e){return this.style[t]=e,this},Element.prototype.setStyle=function(t){return this.setAttribute("style",t),this},Element.prototype.getStyle=function(t){return this.styles||(this.styles=window.getComputedStyle(this,null)),this.styles.getPropertyValue(t)},Element.prototype.getPath=function(){if(""!==this.id)return"#"+this.id;if(this===document.body)return this.getTag();for(var t=1,e=this.parentNode.childNodes,o=0;o<e.length;o++){var s=e[o];if(s===this)return this.parentNode.getPath()+" > "+this.getTag()+":nth-of-type("+t+")";1===s.nodeType&&s.getTag()===this.getTag()&&(t+=1)}};const g=function(t,e){const o=Object.keys(e);for(let s=0;s<o.length;s++){const n=o[s];t=t.replace(new RegExp("{"+n+"}","g"),e[n])}return t.replace(new RegExp("{\\w+}","g"),"")},m={"background-color":"bg",fill:"fl",stroke:"st",color:"cl","border-top-color":"bt","border-right-color":"br","border-bottom-color":"bb","border-left-color":"bl"},y={fill:["svg","path","rect","clippath","circle","elipse","line","polygon"],stroke:["svg"]},b={border:{test:"^0D+|none",props:["border-top-color","border-right-color","border-bottom-color","border-left-color"]}};const k=function(t,e){return g("{selector}.{className} {\n\ttransition: all .1s linear !important;\n}\n",{selector:t.getPath(),className:e})},v=function(t){return function(t){const e=t.replace(/^(\w+).*/i,"$1"),o=document.createElement(e);var s=t.replace(/\[[^\[\]]+\]/g,"").match(/#[\w-]+/),n=t.replace(/\[[^\[\]]+\]/g,"").match(/\.([\w\-]+)/g),r=t.match(/\[[^\[\]]+\]/g);return s&&(o.id=s.join("").replace("#","")),n&&o.setClass(n.join("").replace(/\./g," ").trim()),r&&r.forEach((t=>{var e=t.replace(/\[|\]/g,"").split("=");o.setAttribute(e[0],e.splice(1).join("="))})),o}("style[class="+t+"]")},T=function(t,e,o,s,n){return function(t,e,o,s,n){let r="";return Object.keys(t).forEach((e=>{r+=function(t,e,o,s){let n="";return Object.keys(t.elements).forEach((r=>{if(!(e.indexOf(r)<0?u(t.color,o):d(t.color,s)))return;let i=[];t.elements[r].forEach((t=>{i.push(t.getPath())})),n+=g("{selector} {\n\t{prop}: {color} !important;\n}\n",{selector:i.join(",\n"),prop:r,color:t.inverted.toRgba()})})),n}(t[e],o,s,n)})),r}(t,0,o,s,n)},E=function(t){let e=Object.keys(m);const o=t.getTag();return Object.keys(b).forEach((o=>{const s=b[o],n=t.getStyle(o);new RegExp(s.test).test(n)&&(e=e.filter((t=>s.props.indexOf(t)<0)))})),Object.keys(y).forEach((t=>{y[t].indexOf(o)<0&&(e=e.filter((e=>e!=t)))})),e},w=function(t,e){const o=t.getStyle(e);return!!/^rgb/.test(o)&&o};function x(t,e,o,s,n){E(t).forEach((e=>{const o=w(t,e);o&&function(t,e){return t[e]||(t[e]=[]),t[e]}(function(t,e,o=0){return t[e]||(t[e]={color:l(e),inverted:c(l(e),o),elements:{}}),t[e]}(s,o,n).elements,e).push(t)}));const r=t.children;for(let t=0;t<r.length;t++){const i=r[t];0==i.hasClass(e)&&o.indexOf(i.getTag())<0&&(s=x(i,e,o,s,n))}return s}const C=function(t,e){return k(t,e)},S=function(t,e,o,s,n,r,i,a){return function(t,e,o,s,n,r){return T(t,e,o,s,n,r)}(function(t,e,o,s,n,r,i){return function(t,e,o){let s={};return Object.keys(t).forEach((n=>{const r=t[n].color;(d(r,o)||u(r,e))&&(s[n]=t[n])})),s}(x(t,e,o,{},i),s,n)}(t,e,s,n,r,0,i),e,o,n,r,a)},N=function(t){return v(t)},M=class{constructor(t,e={}){this.root=t,this.options={mode:e.mode||"device",animate:e.animate??!0,offset:e.offset??10,className:e.className||"darkjs",storeKey:e.storeKey??"darkjs",darkThreshold:e.darkThreshold??30,brightThreshold:e.brightThreshold??70,background_props:e.backgroundProps??["background-color"],exclude_elements:e.exclude_elements??["style","script","img","text","video","audio"]},this.isDark=!1,this.styles=N(this.options.className),this.modes={on:"darkmode on",off:"darkmode off",custom:"darkmode state",device:"darktheme of device"},document.head.append(this.styles),this.init()}init(){this.addObserver(),this.checkStoredState()}addObserver(){this.root&&(this.root.addClass(this.options.className),this.observer=new MutationObserver(this.onChange.bind(this)),this.observer.observe(this.root,{attributes:!0,childList:!0,subtree:!0}))}checkStoredState(){if(this.getDarkState()){this.isDark=!0;const t=r(this.options.storeKey);t&&this.styles.setHtml(t)}}getMode(){return this.modes[this.options.mode]?this.options.mode:"device"}setMode(t){const e=!!this.modes[t];return e&&(this.options.mode=t),e}getDarkState(){switch(this.getMode()){case"on":return!0;case"off":return!1;case"custom":return!!r(this.options.storeKey);default:return i()}}addStyles(t){this.styles.setHtml("");const e=t?C(this.root,this.options.className):"",o=S(this.root,this.options.className,this.options.background_props,this.options.exclude_elements,this.options.darkThreshold,this.options.brightThreshold,this.options.offset);this.styles.addHtml(e),this.styles.addHtml(o)}removeStyles(t){this.styles.setHtml(t?C(this.root,this.options.className):"")}darkem(t){this.isDark=!0,this.root.addClass(`${this.options.className}-on`),this.addStyles(t??this.options.animate),n(this.options.storeKey,this.styles.getText())}darkemnt(){this.isDark=!1,this.isMutating=!0,this.root.removeClass(`${this.options.className}-on`),this.removeStyles(this.options.animate),n(this.options.storeKey,""),setTimeout((()=>this.isMutating=!1))}toggle(){this.setMode(this.getDarkState()?"off":"on"),this.checkState()}checkState(){this.isMutating=!0,this.getDarkState()?this.darkem(!this.isDark):this.darkemnt(this.isDark),setTimeout((()=>this.isMutating=!1))}onChange(t,e){if(!this.isMutating){for(const e of t)if(this.isNestedMutation(e.target))return;this.checkState()}}isNestedMutation(t){return t!=this.root&&(t.hasClass(this.options.className)||this.isNestedMutation(t.parentNode))}},H=document.querySelector('script[src*="darkjs.js"]');M.options=t(H.src.split("?").pop()),M.callback=window[M.options.callback]||function(){M.default||(M.default=new M(null,M.options)),document.body?(M.default.root=document.body,M.default.init()):setTimeout(M.callback)},window.Darkjs||(window.Darkjs=M),window.Darkjs.callback(M,M.options)})()})();